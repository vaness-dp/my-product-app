(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[571],{459:(e,t,r)=>{"use strict";r.d(t,{K:()=>a});var s=r(5453),l=r(6786);let a=(0,s.v)()((0,l.Zr)((e,t)=>({products:[],setProducts:t=>e({products:t}),addProduct:t=>e(e=>({products:[...e.products,t]})),removeProduct:t=>e(e=>({products:e.products.filter(e=>e.id!==t)})),toggleLike:t=>e(e=>({products:e.products.map(e=>e.id===t?{...e,liked:!e.liked}:e)})),updateProduct:(t,r)=>e(e=>({products:e.products.map(e=>e.id===t?{...e,...r}:e)}))}),{name:"product-store",storage:(0,l.KU)(()=>localStorage)}))},718:(e,t,r)=>{Promise.resolve().then(r.bind(r,8541))},8541:(e,t,r)=>{"use strict";r.d(t,{ProductsContent:()=>k});var s=r(5155);function l(e){let{filterStatus:t,setFilterStatusAction:r,searchQuery:l,setSearchQueryAction:a}=e;return(0,s.jsxs)("div",{className:"mb-4 flex flex-col items-center justify-between gap-2 sm:flex-row",children:[(0,s.jsxs)("div",{className:"flex gap-2",children:[(0,s.jsx)("button",{className:"rounded border px-4 py-2 ".concat("all"===t?"bg-blue-500 text-white":""),onClick:()=>r("all"),children:"All"}),(0,s.jsx)("button",{className:"rounded border px-4 py-2 ".concat("liked"===t?"bg-blue-500 text-white":""),onClick:()=>r("liked"),children:"Favorites"}),(0,s.jsx)("button",{className:"rounded border px-4 py-2 ".concat("not-liked"===t?"bg-blue-500 text-white":""),onClick:()=>r("not-liked"),children:"Not Favorites"})]}),(0,s.jsx)("div",{children:(0,s.jsx)("input",{type:"text",placeholder:"Search by name...",value:l,onChange:e=>a(e.target.value),className:"rounded border p-2"})})]})}var a=r(5695);function d(){let e=(0,a.useRouter)();return(0,s.jsx)("button",{className:"rounded border px-4 py-2",onClick:()=>e.push("/create-product"),children:"Create product"})}function i(e){let{currentPage:t,totalPages:r,onPageChangeAction:l}=e;return(0,s.jsxs)("div",{className:"mt-4 flex items-center justify-center gap-4",children:[(0,s.jsx)("button",{onClick:()=>l(Math.max(t-1,1)),disabled:1===t,className:"rounded border px-4 py-2 disabled:opacity-50",children:"Previous"}),(0,s.jsxs)("span",{children:["Page ",t," of ",r]}),(0,s.jsx)("button",{onClick:()=>l(Math.min(t+1,r)),disabled:t===r,className:"rounded border px-4 py-2 disabled:opacity-50",children:"Next"}),(0,s.jsx)(d,{})]})}var o=r(6874),n=r.n(o),c=r(2115),u=r(4940),x=r(4416);function p(e){let{productId:t,onEdit:r,onRemove:l}=e;return(0,s.jsxs)("div",{className:"flex items-center justify-end gap-2 p-4",children:[(0,s.jsx)("button",{onClick:r,className:"rounded p-2 text-gray-500 transition-colors hover:text-blue-500",children:(0,s.jsx)(u.A,{size:24,className:"h-6 w-6"})}),(0,s.jsx)("button",{onClick:l,className:"rounded p-2 text-gray-500 transition-colors hover:text-red-500",children:(0,s.jsx)(x.A,{size:24,className:"h-6 w-6"})})]})}var h=r(2596),m=r(1976);function g(e){let{productId:t,liked:r,onToggle:l}=e;return(0,s.jsx)("button",{onClick:l,className:"absolute top-3 right-3 z-10 rounded-full bg-gray-100 p-2 shadow hover:bg-gray-200",children:(0,s.jsx)(m.A,{size:24,className:(0,h.A)("h-6 w-6",r?"fill-red-500 text-red-500":"text-gray-500")})})}function f(e){let{image:t,title:r}=e;return(0,s.jsx)("div",{className:"relative mb-2 aspect-[4/3] w-full rounded-lg",children:(0,s.jsx)("img",{src:t,alt:r,className:"absolute inset-0 h-full w-full rounded-md object-contain"})})}function b(e){let{title:t,description:r}=e;return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("h3",{className:"mb-1 line-clamp-1 text-lg font-semibold text-[#4A4A4A]",children:t}),(0,s.jsx)("p",{className:"line-clamp-3 text-sm text-gray-600",children:r})]})}var j=r(459);function v(e){let{product:t}=e,{removeProduct:r,toggleLike:l}=(0,j.K)(),d=(0,a.useRouter)();return(0,s.jsxs)("div",{className:"relative flex w-full flex-col overflow-hidden rounded-xl bg-white shadow-md hover:shadow-lg",onClick:e=>{if(e.target.closest("button"))return},children:[(0,s.jsx)(g,{productId:t.id,liked:t.liked,onToggle:()=>l(t.id)}),(0,s.jsxs)(n(),{href:"/products/".concat(t.id),className:"flex-grow p-4",children:[(0,s.jsx)(f,{image:t.image,title:t.title}),(0,s.jsx)(b,{title:t.title,description:t.description})]}),(0,s.jsx)(p,{productId:t.id,onEdit:()=>{d.push("/products/edit/".concat(t.id))},onRemove:()=>{r(t.id)}})]})}var N=r(3464);function k(){let{filterStatus:e,setFilterStatus:t,searchQuery:r,setSearchQuery:d,currentPage:o,totalPages:n,paginatedProducts:u,handlePageChange:x}=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:6,{products:t,setProducts:r}=(0,j.K)(),s=(0,a.useSearchParams)(),l=s.get("filter")||"all",d=Number(s.get("page"))||1,[i,o]=(0,c.useState)(l),[n,u]=(0,c.useState)(""),[x,p]=(0,c.useState)(d),h=(0,c.useRef)(!0),m=(0,c.useRef)(!1);(0,c.useEffect)(()=>{if(h.current){h.current=!1;return}p(1)},[i,n]),(0,c.useEffect)(()=>{m.current||N.A.get("https://fakestoreapi.com/products").then(e=>{let s=e.data.map(e=>({...e,liked:!1}));r([...s.map(e=>{let r=t.find(t=>t.id===e.id);return r?{...e,...r}:e}),...t.filter(e=>!s.some(t=>t.id===e.id))]),m.current=!0}).catch(e=>console.error(e))},[t,r]);let g=t.filter(e=>("liked"!==i||!!e.liked)&&("not-liked"!==i||!e.liked)&&!(n&&!e.title.toLowerCase().includes(n.toLowerCase()))),f=Math.max(1,Math.ceil(g.length/e)),b=g.slice((x-1)*e,x*e);return{filterStatus:i,setFilterStatus:o,searchQuery:n,setSearchQuery:u,currentPage:x,totalPages:f,paginatedProducts:b,handlePageChange:e=>{p(e)}}}(6);return(0,s.jsxs)("div",{className:"container mx-auto p-4",children:[(0,s.jsx)("h1",{className:"mb-4 text-3xl font-bold",children:"Products"}),(0,s.jsx)(l,{filterStatus:e,setFilterStatusAction:t,searchQuery:r,setSearchQueryAction:d}),(0,s.jsx)("div",{className:"grid grid-cols-1 gap-4 sm:grid-cols-2 md:grid-cols-3",children:u.map(t=>(0,s.jsx)(v,{product:t,currentPage:o,filterStatus:e},t.id))}),(0,s.jsx)(i,{currentPage:o,totalPages:n,onPageChangeAction:x})]})}}},e=>{var t=t=>e(e.s=t);e.O(0,[744,441,684,358],()=>t(718)),_N_E=e.O()}]);