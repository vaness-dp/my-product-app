(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[602],{459:(e,r,t)=>{"use strict";t.d(r,{K:()=>d});var s=t(5453),i=t(6786);let d=(0,s.v)()((0,i.Zr)((e,r)=>({products:[],setProducts:r=>e({products:r}),addProduct:r=>e(e=>({products:[...e.products,r]})),removeProduct:r=>e(e=>({products:e.products.filter(e=>e.id!==r)})),toggleLike:r=>e(e=>({products:e.products.map(e=>e.id===r?{...e,liked:!e.liked}:e)})),updateProduct:(r,t)=>e(e=>({products:e.products.map(e=>e.id===r?{...e,...t}:e)}))}),{name:"product-store",storage:(0,i.KU)(()=>localStorage)}))},2593:(e,r,t)=>{"use strict";t.d(r,{BackButton:()=>d});var s=t(5155),i=t(5695);function d(){let e=(0,i.useRouter)();return(0,s.jsx)("button",{className:"my-4 rounded border px-4 py-2",onClick:()=>e.push("/products"),children:"Back"})}},8599:(e,r,t)=>{Promise.resolve().then(t.bind(t,9300))},9300:(e,r,t)=>{"use strict";t.d(r,{default:()=>n});var s=t(5155),i=t(2593);t(2115);var d=t(2177);function a(e){let{label:r,error:t,registration:i,textarea:d}=e;return(0,s.jsxs)("div",{className:"mb-4",children:[(0,s.jsx)("label",{className:"mb-1 block",children:r}),d?(0,s.jsx)("textarea",{...i,className:"w-full rounded border p-2"}):(0,s.jsx)("input",{...i,className:"w-full rounded border p-2"}),t&&(0,s.jsx)("p",{className:"text-sm text-red-500",children:t.message})]})}function o(e){let{defaultValues:r,onSubmitAction:t}=e,{register:i,handleSubmit:o,formState:{errors:l}}=(0,d.mN)({defaultValues:r});return(0,s.jsxs)("form",{onSubmit:o(t),className:"max-w-lg space-y-4",children:[(0,s.jsx)(a,{label:"Name",registration:i("title",{required:"Required field"}),error:l.title}),(0,s.jsx)(a,{label:"Description",registration:i("description",{required:"Required field",minLength:{value:10,message:"Minimum 10 characters"}}),error:l.description,textarea:!0}),(0,s.jsx)(a,{label:"Image URL",registration:i("image",{required:"Required field"}),error:l.image}),(0,s.jsx)("button",{type:"submit",className:"rounded bg-blue-500 px-4 py-2 text-white",children:"Save changes"})]})}var l=t(5695),u=t(459);let c=e=>{let r=(0,l.useRouter)(),{id:t}=(0,l.useParams)(),s=e||t;s||console.error("No product id provided");let i=(0,l.useSearchParams)(),d=i.get("page")||"1",a=i.get("filter")||"all",{products:o,updateProduct:c}=(0,u.K)(),n=s?Number(s):NaN,m=isNaN(n)?void 0:o.find(e=>e.id===n),p={title:(null==m?void 0:m.title)||"",description:(null==m?void 0:m.description)||"",image:(null==m?void 0:m.image)||""},x=async e=>{if(!m){console.error("Product not found");return}c(m.id,e),r.push("/products?page=".concat(d,"&filter=").concat(a))};return{product:m,defaultValues:p,onSubmit:x}};function n(e){let{id:r}=e,{product:t,defaultValues:d,onSubmit:a}=c(r);return t?(0,s.jsxs)("div",{className:"container mx-auto p-4",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsx)("h1",{className:"mb-4 text-2xl font-bold",children:"Edit product"}),(0,s.jsx)(i.BackButton,{})]}),(0,s.jsx)(o,{defaultValues:d,onSubmitAction:a})]}):(0,s.jsx)("div",{children:"Product not found"})}}},e=>{var r=r=>e(e.s=r);e.O(0,[20,441,684,358],()=>r(8599)),_N_E=e.O()}]);